<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<script
  src="{{ 'blog-posts-list.js' | asset_url }}"
  type="module"
></script>

{% stylesheet %}
  /**
   * Blog posts page layout
   */
  /* .blog-posts {
    --page-content-width: var(--narrow-page-width);
    --page-width: calc(var(--page-content-width) + (var(--page-margin) * 2));
    --columns-gap: 36px;
    --rows-gap: 36px;
  } */
  /* .blog-posts-container {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 1rem;
    width: 100%;
    column-gap: var(--columns-gap);
    row-gap: var(--rows-gap);
  } */

  /**
   * Apart from the first and second rows in the grid, all remaining blog posts
   * are arranged in a three-column layout:
   * +------------+------------+-------------+
   * |            |            |             |
   * |  (span 2)  |  (span 2)  |  (span 2)   |
   * |            |            |             |
   * +------------+------------+-------------+
   */
  /* .blog-post-item {
    grid-column: span 2;
    --blog-post-card-scale: 0.6;

    @media screen and (width < 750px) {
      grid-column: span 6;
      --blog-post-card-scale: 0.5;
    }
  } */

  /**
   * The second row of blog posts has two columns:
   * +-------------------+-------------------+
   * |                   |                   |
   * |  (column span 3)  |  (column span 3)  |
   * |                   |                   |
   * +-------------------+-------------------+
   */
  /* .blog-post-item:nth-child(2),
  .blog-post-item:nth-child(3) {
    grid-column: span 3;
    --blog-post-card-scale: 0.8;

    @media screen and (width < 750px) {
      grid-column: span 6;
      --blog-post-card-scale: 0.5;
    }
  } */

  /**
   * The first row of blog posts has only one column:
   * +---------------------------------------+
   * |                                       |
   * |           (1 column span 6)           |
   * |                                       |
   * +---------------------------------------+
   */
  /* .blog-post-item:first-child {
    grid-column: span 6;
    --blog-post-card-scale: 1;
  } */

  /**
   * When there's no image, the blog post item has a border.
   */
  .blog-post-item {
    border: 1px solid rgba(from var(--color-foreground) r g b / 0.2);
    padding: 0 1rem 1rem;
  }
  .blog-post-item:has(.blog-post-card__image-container) {
    border: none;
    padding: 0;
  }

  .mySwiper{
    width: 100%;
  }

  .blog-slider-nav{
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 38px;
  }

  .swiper-pagination{
    position: relative!important;
    top: 0!important;
    left: 0!important;
    right: 0!important;
    bottom: 0!important;
    width: fit-content!important;
    display: flex!important;
    align-items: center!important;
    gap: 10px;

    span{
      margin: 0!important;
      width: auto!important;
      height: auto!important;
      background: transparent!important;
    }
  }

  .swiper-button-prev, .swiper-button-next{
    position: relative!important;
    top: 0!important;
    left: 0!important;
    right: 0!important;
    bottom: 0!important;
    width: auto!important;
    height: auto!important;
    margin: 0!important;

    img{
      height: 12px;
    }
  }

  .swiper-button-prev::after{
    content: ''!important;
  }

  .swiper-button-next::after{
    content: ''!important;
  }

  .blog-slider-nav{
    margin-top: 68px;
  }
{% endstylesheet %}

<blog-posts-list section-id="{{ section.id }}">
  <div class="section-background color-{{ section.settings.color_scheme }}"></div>
  <div
    class="
      section
      color-{{ section.settings.color_scheme }}
      blog-posts
      spacing-style
      size-style
      blog-main-wrapper
    "
    style="{% render 'spacing-style', settings: section.settings %}"
  >
    {% content_for 'blocks' %}

    {%- paginate blog.articles by 12 -%}
      <span ref="viewMorePrevious"></span>
      <div class="swiper mySwiper">
        <div
          ref="grid"
          last-page="{{ paginate.pages }}"
          class="blog-posts-container swiper-wrapper"
        >
          {% for article in blog.articles %}
            <div
              class="blog-post-item swiper-slide"
              ref="cards[]"
              data-page="{{ paginate.current_page }}"
            >
              {% content_for 'block', id: 'static-blog-post-card', type: '_blog-post-card', article: article %}
            </div>
          {% endfor %}
        </div>
      </div>
      <span ref="viewMoreNext"></span>
      <div class="blog-slider-nav">
        <div class="swiper-button-prev"><img src="https://cdn.shopify.com/s/files/1/0651/0729/6492/files/prev-btn-blog.svg?v=1751023392"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"><img src="https://cdn.shopify.com/s/files/1/0651/0729/6492/files/next-btn-blog.svg?v=1751023393"></div>
      </div>
    {%- endpaginate -%}
  </div>
</blog-posts-list>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
  var swiper = new Swiper(".mySwiper", {
    slidesPerView: 2,
    spaceBetween: 20,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
      type: 'fraction'
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    breakpoints: {
      768: {
        slidesPerView: 2,
        spaceBetween: 20,
      },
      0: {
        slidesPerView: 1,
        spaceBetween: 10,
      }
    }
  });
</script>

{% schema %}
{
  "name": "t:names.blog_posts",
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "text"
    },
    {
      "type": "icon"
    },
    {
      "type": "image"
    },
    {
      "type": "button"
    },
    {
      "type": "video"
    },
    {
      "type": "group"
    },
    {
      "type": "spacer"
    },
    {
      "type": "_divider"
    }
  ],
  "disabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ]
}
{% endschema %}
